<!-- <md-autocomplete
    class="margin-bottom-20"
    ng-disabled="vm.isDisabled"
    md-no-cache="vm.noCache"
    md-selected-item="selectedItem"
    md-search-text-change="vm.searchTextChange(vm.searchText)"
    md-search-text="vm.searchText"
    md-selected-item-change="vm.selectedItemChange(item)"
    md-items="item in vm.querySearch(vm.searchText)"
    md-item-text="item.display"
    md-min-length="0"
    placeholder="What is your favorite US state?">
    <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item.display}}</span>
</md-autocomplete> -->

<md-content id="client-overview-container" class="dashboard-container overlay-5 padded-content-page" layout="row"  flex>

  <div layout="column" layout-sm="column" layout-margin flex >
     <md-card >

       <!-- filter section -->
       <md-toolbar class="md-table-toolbar">

         <div class = "md-toolbar-tools">
           <md-switch ng-model="vm.switch" flex = "10" aria-label="Rostr/Survey View" class="md-primary">
             <p ng-if = "!vm.switch">
               Roster
             </p>
             <p ng-if = "vm.switch">
               Survey
             </p>
           </md-switch>

           <md-input-container class = "md-toolbar-tools"  flex = "20">

                <md-icon class="material-icons" style="padding-top:17px; ">search</md-icon>
                <form  name="filter.form" style="padding-top:25px;">

                  <input style="padding-top:0px; background-color: #2196F3; " type="text" ng-model="vm.query.filter" class="ng-valid ng-touched ng-valid-parse ng-pristine " aria-label = "search">

                </form>

              <md-button class="md-icon-button md-button md-ink-ripple" ng-transclude="" ng-click="vm.removeFilter()" aria-label="close" style="padding-top: 3px;">
                <md-icon class="material-icons">close</md-icon>
                <div class="md-ripple-container"></div>
              </md-button>

           </md-input-container>



           <md-input-container flex = "15" ng-hide = '!vm.switch'>
             <md-select  ng-model = "vm.selectedDataSurvey"  style="margin: 5px;" aria-label = "UDOP" placeholder = "Select Survey" class="md-primary">
               <md-option ng-repeat = "s in vm.user.surveyTemplates" ng-value = "s">
                 {{s.title}}
               </md-option>
             </md-select>
           </md-input-container>


        </div>

       </md-toolbar>

      <md-card-content style="padding-top: 0px; background-color: white">
        <md-table-container  >
               <table md-table class="md-primary md-data-table" ng-model="vm.selected" id="client-table" >
                  <thead md-head md-order="vm.query.order">
                        <tr md-row ng-show = "!vm.switch">
                            <th md-column md-order-by="username">Clients</th>
                            <th md-column md-order-by="pipelineStage">Pipeline</th>
                            <th md-column md-order-by="recent"><span translate>{{vm.columns.recent}}</span></th>
                            <th md-column md-order-by=""><span translate>lastReminder</span></th>
                            <th md-column md-order-by=""><span translate>lastResponse</span></th>
                        </tr>
                        <tr md-row ng-show = "vm.switch">
                          <th md-column>Clients</th>
                        </tr>

                  </thead>
                    <tbody md-body ng-show = "vm.switch">
                      <tr  md-row md-auto-select="false" md-select="client" ng-repeat="client in vm.persons| orderBy: vm.query.order | filter:vm.query.filter  | limitTo: vm.query.limit: (vm.query.page - 1) * vm.query.limit">


                        <td md-cell>
                          <img ng-src="{{client.imgUrl}}" style="border-radius: 50%; width: 50px; margin: 10px;" >
                          {{client.username}}
                        </td>
                        <td md-cell>
                          {{client.pipelineStage}}
                        </td>
                        <td md-cell>
                          <img ng-src="{{client.reminderStatus}}" style="border-radius: 50%; width: 15px; margin: 10px;" >
                          {{client.reminderQuestion}}
                        </td>
                        <td md-cell>
                          {{client.testReminder}}
                        </td>
                        <td md-cell ng-repeat = "r in client.testResponses">
                          {{r}}
                        </td>

                      </tr>

                    </tbody>
                    <tbody md-body ng-show = "!vm.switch">
                      <tr  md-row md-auto-select="false" md-select="client" ng-repeat="client in vm.user.clients| orderBy: vm.query.order | filter:vm.query.filter  | limitTo: vm.query.limit: (vm.query.page - 1) * vm.query.limit">


                        <td md-cell >
                          <img ng-src="{{client.imgUrl}}" style="border-radius: 50%; width: 50px; margin: 10px;" >
                          {{client.firstName + " " + client.lastName}}
                        </td>

                        <td md-cell>
                          {{client.pipelineStage}}
                        </td>

                        <td md-cell>
                          <most-recent selected="client"></most-recent>
                        </td>
                      </tr>

                    </tbody>

               </table>
        </md-table-container>
        <md-table-pagination ng-show = "!vm.switch"md-limit="vm.query.limit" md-limit-options="[5, 10, 15]" md-page="vm.query.page" md-total="{{vm.user.clients.length}}" md-page-select></md-table-pagination>
        <!--Change md-total to survey cleints  -->
        <md-table-pagination ng-show = "vm.switch" md-limit="vm.query.limit" md-limit-options="[5, 10, 15]" md-page="vm.query.page" md-total="{{vm.persons.length}}" md-page-select></md-table-pagination>
      </md-card-content>
    </md-card>
  </div>
</md-content>
